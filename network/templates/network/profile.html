{% extends 'network/base.html' %}
{% load static %}

{% block title %}{{ user.username }} ‚Äî –ü—Ä–æ—Ñ—ñ–ª—å{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="avatar-section">
            {% if user.profile.avatar %}
                <img src="{{ user.profile.avatar.url }}" alt="Avatar" class="avatar-img">
            {% else %}
                <img src="{% static 'default-avatar.png' %}" alt="Default Avatar" class="avatar-img">
            {% endif %}
        </div>

        <div class="info-section">
            <h2 class="username">@{{ user.username }}</h2>
            <p class="joined-date">–ó –Ω–∞–º–∏ –∑ {{ user.date_joined|date:"d.m.Y" }}</p>
            <p class="email">üìß {{ user.email }}</p>
            {% if request.user == user %}
                <a href="{% url 'edit_profile' %}" class="edit-profile-btn">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</a>
            {% endif %}
        </div>

        <div class="stats-section">
            <div class="stat">
                <strong>{{ posts|length }}</strong>
                <span>–ü–æ—Å—Ç–∏</span>
            </div>
            <div class="stat">
                <strong>{{ total_likes }}</strong>
                <span>–õ–∞–π–∫–∏</span>
            </div>
        </div>
    </div>

    <hr>

    <div class="profile-posts">
        {% if posts %}
            <div class="posts-grid">
                {% for post in posts %}
                    <div class="post-card profile-post-card">
                        <img src="{{ post.image.url }}" alt="–ü–æ—Å—Ç">
                        <div class="caption">{{ post.caption|truncatewords:10 }}</div>
                        <div class="post-footer">
                            <span>‚ù§Ô∏è {{ post.likes.count }}</span>
                            <span>{{ post.created_at|date:"d.m.Y" }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-posts">–¶–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —â–µ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–≤ –ø–æ—Å—Ç—ñ–≤.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
